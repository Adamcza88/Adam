<!doctype html><html lang="cs"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Rotation Watch – Bybit USDT Perp</title>
<style>
  body{margin:0;font:14px Inter,system-ui;background:#0f172a;color:#e5e7eb}
  header{padding:14px 18px;border-bottom:1px solid #1f2937;background:rgba(15,23,42,.7);backdrop-filter:blur(8px)}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;padding:14px}
  .card{border:1px solid #334155;border-radius:10px;padding:10px;background:rgba(30,41,59,.6)}
  .bar{height:6px;border-radius:4px;background:#1f2937;overflow:hidden}
  .fill{height:100%}
</style></head><body>
<header>
  <b>Rotation Watch</b> • <span id="latency"></span> • <button id="refresh">Refresh</button>
</header>
<section class="grid" id="grid"></section>
<script>
async function load(){
  const t0=performance.now();
  const res=await fetch('/api/snapshot'); const j=await res.json();
  document.getElementById('latency').textContent=`${Math.round(performance.now()-t0)} ms`;
  const g=document.getElementById('grid'); g.innerHTML='';
  const toColor = s => s>1?'#10b981':s<-1?'#ef4444':'#eab308';
  j.rows.forEach(r=>{
    const el=document.createElement('div'); el.className='card';
    el.innerHTML = `<div style="display:flex;justify-content:space-between">
        <b>${r.symbol}</b><span>${r.score.toFixed(2)}</span></div>
      <div>ΔVol15: ${r.dVol15.toFixed(1)}% | ΔOI15: ${r.dOI15.toFixed(1)}% | ΔP15: ${r.dPrice15.toFixed(1)}%</div>
      <div class="bar"><div class="fill" style="width:${Math.min(100,Math.abs(r.score)*10)}%;background:${toColor(r.score)}"></div></div>`;
    g.appendChild(el);
  });
}
document.getElementById('refresh').onclick=load;
setInterval(load, 15000); load();
</script></body></html>
